# 使用案例 (Use Cases)

本文件描述了本網站主要角色的典型操作流程，包括「一般使用者」和「管理員」。

---

## Use Case 1: 一般使用者儲值流程 (User Recharge Flow)

**角色:** 一般使用者 (已註冊或未註冊)
**目標:** 成功下訂單，並等待儲值完成。

1.  **瀏覽商店:**
    *   使用者進入網站，首先會看到位於 `/shop` 的商店主頁，頁面上陳列著所有可供儲值的遊戲項目。

2.  **選擇遊戲:**
    *   使用者對某個遊戲感興趣，點擊該遊戲的卡片。
    *   系統將使用者導向至該遊戲的專屬頁面 `/shop/[game_id]`。

3.  **下訂單前的登入/註冊:**
    *   在遊戲頁面，使用者決定下單。系統會要求使用者登入。
    *   **如果使用者已註冊:** 輸入帳號密碼登入。
    *   **如果使用者未註冊:** 點擊註冊，建立一個新帳號，然後自動登入。

4.  **填寫訂單資訊:**
    *   登入後，使用者在訂單表單 (`OrderForm`) 中填寫必要的遊戲資訊，例如「遊戲角色 ID」或「伺服器名稱」。

5.  **提交訂單:**
    *   使用者點擊「提交訂單」按鈕。
    *   系統會建立一筆新的訂單記錄，其初始狀態為 **pending (處理中)**。
    *   頁面會顯示「訂單已成功提交！」的訊息，並提示使用者聯繫管理員以完成付款。

6.  **線下付款:**
    *   使用者透過網站外的方式 (例如：銀行轉帳、LINE Pay) 聯繫管理員並支付款項。

7.  **等待儲值:**
    *   使用者完成付款後，等待管理員確認款項並完成後續的儲值操作。訂單狀態會由管理員在後台更新。

---

## Use Case 2: 管理員訂單處理與遊戲管理流程 (Admin Order & Game Management Flow)

**角色:** 管理員
**目標:** 確認使用者款項、完成訂單、觸發儲值腳本，以及管理網站上的遊戲。

### 場景 A: 處理新訂單

1.  **登入後台:**
    *   管理員使用自己的管理員帳號在 `/auth` 頁面登入。

2.  **接收付款通知:**
    *   管理員收到使用者從線下管道傳來的付款通知。

3.  **進入訂單管理頁面:**
    *   管理員導航至 `/admin/orders`。
    *   頁面上會顯示所有訂單的列表，管理員可以利用篩選功能找到狀態為 **pending** 的訂單。

4.  **確認款項並更新訂單:**
    *   管理員核對使用者資訊與款項，確認無誤。
    *   在對應的訂單旁，點擊「**確認收款 (Mark as Paid)**」按鈕。

5.  **觸發自動化腳本:**
    *   系統在後端將訂單狀態從 `pending` 更新為 `paid`。
    *   **此狀態變更會觸發預設的 hook**，自動執行對應遊戲的儲值腳本 (`process/Identity.py` 或其他)，並傳入訂單中的角色資訊。

6.  **完成:**
    *   腳本執行完畢，使用者的遊戲帳號即完成儲值。管理員在頁面上看到訂單狀態已更新為 **paid**。

### 場景 B: 管理遊戲項目

1.  **進入遊戲管理頁面:**
    *   管理員登入後，導航至 `/admin/games`。

2.  **新增遊戲:**
    *   點擊「新增遊戲」按鈕。
    *   在表單中填寫遊戲名稱、描述、價格等資訊，然後儲存。
    *   新的遊戲會立即顯示在商店頁面。

3.  **編輯或刪除遊戲:**
    *   在遊戲列表中，點擊既有遊戲旁的「編輯」或「刪除」按鈕，即可修改其資訊或將其從商店下架。
