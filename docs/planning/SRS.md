# 系統需求規格書 (System Requirements Specification)

## 1. 簡介

### 1.1. 目的
本文件旨在詳細定義遊戲儲值網站的功能性與非功能性需求。其目的是為開發團隊提供一個清晰、一致的開發指南，並作為後續測試與驗收的依據。

### 1.2. 範圍
本系統是一個Web應用程式，提供兩大核心流程：
1.  **一般使用者:** 瀏覽遊戲、提交儲值訂單，並透過線下方式完成付款。
2.  **管理員:** 管理網站內容（遊戲）、處理使用者訂單，並觸發後續的自動化儲值流程。

### 1.3. 名詞定義
- **使用者:** 泛指所有存取本網站的訪客，分為未註冊使用者、已註冊使用者與管理員。
- **訂單 (Order):** 使用者為特定遊戲提交的儲值請求。
- **訂單狀態 (Order Status):**
    - **Pending:** 處理中。使用者已提交訂單，但管理員尚未確認付款。
    - **Paid:** 已付款。管理員已確認收到款項。
- **Hook (掛鉤):** 一個在特定事件發生時（如此處的訂單狀態更新）自動觸發的機制。

---

## 2. 整體描述

### 2.1. 產品願景
本產品是一個輕量級的遊戲儲值平台，旨在簡化使用者的儲值流程與管理員的訂單處理工作。透過清晰的介面與後台自動化觸發機制，提升營運效率。

### 2.2. 使用者特徵
- **一般使用者:** 熟悉基本網路操作的遊戲玩家，希望快速完成儲值訂單的提交。
- **管理員:** 網站的營運人員，需要有效率地管理遊戲項目、核對訂單與款項。

### 2.3. 限制
- **付款方式:** 本系統不直接處理金流。所有付款均透過線下方式（如銀行轉帳）進行，由管理員人工確認。
- **儲值執行:** 本系統不直接執行遊戲儲值，而是在訂單狀態更新為 `paid` 時，觸發一個外部腳本的掛鉤 (hook)。

---

## 3. 特定需求

### 3.1. 功能性需求

#### 3.1.1. 一般使用者儲值流程
- **REQ-FUN-001:** 系統應提供一個公開的商店頁面 (`/shop`)，陳列所有在售的遊戲項目。
- **REQ-FUN-002:** 使用者可以點擊任一遊戲項目，進入該遊戲的專屬詳情與訂單頁面 (`/shop/[game_id]`)。
- **REQ-FUN-003:** 在提交訂單前，系統必須要求使用者登入。
- **REQ-FUN-004:** 如果使用者未註冊，系統應提供註冊功能。
- **REQ-FUN-005:** 使用者成功登入後，應能看到用於提交訂單的表單。
- **REQ-FUN-006:** 訂單表單必須包含讓使用者填寫遊戲特定資訊（如角色ID、伺服器）的欄位。
- **REQ-FUN-007:** 使用者提交訂單後，系統應在資料庫中建立一筆新訂單，其初始狀態必須設定為 `pending`。
- **REQ-FUN-008:** 訂單提交成功後，系統應在前端介面顯示成功訊息，並提示使用者聯繫管理員完成付款。

#### 3.1.2. 管理員訂單與遊戲管理流程
- **REQ-FUN-009:** 系統必須提供一個管理員專用的登入機制。
- **REQ-FUN-010:** 成功登入後，管理員應能存取一個獨立的管理後台 (`/admin`)。
- **REQ-FUN-011:** 管理後台需提供訂單管理頁面 (`/admin/orders`)，顯示所有訂單的列表。
- **REQ-FUN-012:** 訂單列表應包含篩選功能，至少能依訂單狀態 (`pending`, `paid`) 進行篩選。
- **REQ-FUN-013:** 管理員必須能夠將狀態為 `pending` 的訂單更新為 `paid`。
- **REQ-FUN-014:** 當訂單狀態由 `pending` 成功更新為 `paid` 時，系統必須觸發一個預設的 hook，用於執行後續的自動化儲值腳本。
- **REQ-FUN-015:** 管理後台需提供遊戲管理頁面 (`/admin/games`)。
- **REQ-FUN-016:** 管理員必須能夠在遊戲管理頁面新增、編輯和刪除遊戲項目。

### 3.2. 非功能性需求

- **REQ-NFN-001 (安全性):** 對所有管理後台的頁面和 API 端點，必須進行嚴格的權限驗證，僅允許管理員角色存取。
- **REQ-NFN-002 (可用性):** 所有操作（如提交訂單、更新狀態）後，系統應提供即時、清晰的視覺回饋（如成功訊息、錯誤提示）。
- **REQ-NFN-003 (可靠性):** 訂單建立與狀態更新的資料庫交易必須是不可分割的 (Atomic)，確保資料的一致性。

### 3.3. 介面需求

- **UI-01: 商店頁面:** 以網格或列表形式展示遊戲卡片，每個卡片包含遊戲圖片、名稱和價格。
- **UI-02: 訂單頁面:** 顯示遊戲詳情，並提供一個表單讓使用者輸入訂單資訊。
- **UI-03: 管理後台 - 訂單列表:** 以表格形式展示訂單，欄位應包含訂單ID、使用者、遊戲名稱、訂單狀態、建立時間等，並在每筆 `pending` 訂單旁提供狀態更新按鈕。
- **UI-04: 管理後台 - 遊戲列表:** 以表格形式展示遊戲，並提供新增、編輯、刪除按鈕。
