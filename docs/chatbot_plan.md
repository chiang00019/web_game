# LLM 聊天機器人整合 shop/game_id 搜尋規劃

## 1. 目標與需求說明
- 讓使用者能在商店頁面（/shop）以聊天方式快速找到特定 game_id 的遊戲。
- 降低搜尋門檻，提升用戶體驗。
- 支援自然語言查詢（如「我要找原神」或「有沒有射擊類遊戲？」）。

## 2. 使用者互動流程
1. 使用者進入 /shop 頁面，看到聊天機器人介面。
2. 使用者輸入遊戲名稱、類型、關鍵字等自然語言問題。
3. 聊天機器人解析問題，查詢資料庫 game 資料表。
4. 回傳最相關的遊戲資訊（如 game_id、名稱、icon、簡介等），並可直接點擊進入該遊戲詳細頁。
5. 支援多輪對話（如「還有其他推薦嗎？」、「只看動作類」等）。

## 3. LLM 聊天機器人設計重點
- 前端：以聊天 UI 呈現，訊息氣泡、建議問題、loading 狀態。
- 後端：串接 LLM（如 OpenAI GPT-4、或本地 LLM），負責語意解析與查詢生成。
- 支援關鍵字模糊搜尋、分類篩選、推薦遊戲。
- 可擴充為多語系（預設繁體中文）。

## 4. 與 game 資料表整合方式
- 直接查詢 db.sql 中 public.game 資料表：
  - 欄位：game_id, game_name, category, icon, is_active
- 只顯示 is_active = true 的遊戲。
- 支援依名稱、類型、關鍵字等多條件查詢。

## 5. 前端頁面改造規劃
- /shop 頁面改為：
  - 上方為聊天機器人對話區（可固定高度、可滾動）。
  - 下方顯示查詢結果遊戲卡片（可點擊進入 /shop/[game_id]）。
  - 保留原有遊戲卡片樣式，僅改為由聊天機器人觸發顯示。
- 支援 mobile RWD。

## 6. 技術選型與 API 溝通方式
- 前端：React + Next.js，維持現有技術棧。
- 後端：
  - 優先考慮呼叫自建 API（如 /api/chatbot/search），由該 API 負責 LLM prompt、資料查詢與回應。
  - 若有 OpenAI API key，可串接 GPT-4；如無則可用本地 LLM 或 mock。
- API 輸入：{ message: string }
- API 輸出：{ reply: string, games: Game[] }

## 7. 後續擴充建議
- 支援多語系、語音輸入。
- 聊天紀錄保存與推薦。
- 聯動推薦（如「你可能也喜歡」）。
- 管理員可自訂推薦邏輯。 