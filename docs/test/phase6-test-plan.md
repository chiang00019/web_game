# Phase 6 測試計劃：模板化遊戲儲值頁面

## 測試概述

本測試計劃涵蓋 Phase 6 的所有功能模組，包括基礎架構、管理介面和用戶體驗優化三個階段。測試重點在於確保模板化系統的穩定性、管理介面的易用性，以及整體用戶體驗的優質表現。

---

## 1. 基礎架構測試 (第一階段)

### 1.1 模板組件架構測試

#### 1.1.1 GameTopupTemplate.tsx 組件測試
**測試目標：** 驗證通用模板組件的正確渲染和功能

**測試案例：**
- [ ] **TC-6.1.1.1** 模板組件正確載入並顯示
  - 前置條件：訪問任意遊戲儲值頁面
  - 測試步驟：檢查頁面是否正常載入，無錯誤訊息
  - 預期結果：頁面正常顯示，包含遊戲資訊、表單區域、提交按鈕

- [ ] **TC-6.1.1.2** 遊戲基本資訊區塊顯示
  - 前置條件：進入遊戲儲值頁面
  - 測試步驟：檢查遊戲名稱、描述、圖片是否正確顯示
  - 預期結果：遊戲資訊完整且格式正確

- [ ] **TC-6.1.1.3** 套餐選擇區塊功能
  - 前置條件：進入遊戲儲值頁面
  - 測試步驟：點擊不同套餐選項
  - 預期結果：套餐選項可正常選擇，價格正確顯示

#### 1.1.2 DynamicGameOptions.tsx 組件測試
**測試目標：** 驗證動態選項渲染器的正確性

**測試案例：**
- [ ] **TC-6.1.2.1** 文字輸入欄位渲染
  - 前置條件：遊戲配置包含 text 類型欄位
  - 測試步驟：檢查文字輸入框是否正確顯示
  - 預期結果：輸入框顯示正確的標籤和佔位符

- [ ] **TC-6.1.2.2** 下拉選單欄位渲染
  - 前置條件：遊戲配置包含 select 類型欄位
  - 測試步驟：點擊下拉選單，檢查選項列表
  - 預期結果：選項列表正確顯示，可正常選擇

- [ ] **TC-6.1.2.3** 單選按鈕欄位渲染
  - 前置條件：遊戲配置包含 radio 類型欄位
  - 測試步驟：點擊不同單選按鈕
  - 預期結果：單選按鈕可正常選擇，互斥功能正常

- [ ] **TC-6.1.2.4** 複選框欄位渲染
  - 前置條件：遊戲配置包含 checkbox 類型欄位
  - 測試步驟：點擊複選框選項
  - 預期結果：複選框可正常勾選/取消勾選

- [ ] **TC-6.1.2.5** 數字輸入欄位渲染
  - 前置條件：遊戲配置包含 number 類型欄位
  - 測試步驟：輸入數字和文字
  - 預期結果：只接受數字輸入，文字輸入被阻擋

### 1.2 頁面整合測試

#### 1.2.1 遊戲頁面模板化測試
**測試案例：**
- [ ] **TC-6.1.3.1** 現有遊戲頁面成功轉換
  - 前置條件：選擇一個現有遊戲
  - 測試步驟：訪問該遊戲的儲值頁面
  - 預期結果：頁面使用新的模板系統，功能正常

- [ ] **TC-6.1.3.2** 多遊戲模板一致性
  - 前置條件：訪問多個不同遊戲的儲值頁面
  - 測試步驟：比較不同遊戲頁面的佈局和功能
  - 預期結果：所有遊戲頁面使用統一的模板，佈局一致

---

## 2. 管理介面測試 (第二階段)

### 2.1 遊戲配置管理頁面測試

#### 2.1.1 配置管理頁面訪問測試
**測試案例：**
- [ ] **TC-6.2.1.1** 管理員權限驗證
  - 前置條件：使用管理員帳號登入
  - 測試步驟：訪問 `/admin/games/[id]/config`
  - 預期結果：成功進入配置管理頁面

- [ ] **TC-6.2.1.2** 非管理員權限阻擋
  - 前置條件：使用一般用戶帳號登入
  - 測試步驟：嘗試訪問配置管理頁面
  - 預期結果：被重定向或顯示權限不足訊息

#### 2.1.2 配置 CRUD 操作測試
**測試案例：**
- [ ] **TC-6.2.2.1** 新增配置選項
  - 前置條件：在配置管理頁面
  - 測試步驟：填寫配置表單並提交
  - 預期結果：新配置選項成功新增，顯示在列表中

- [ ] **TC-6.2.2.2** 編輯配置選項
  - 前置條件：選擇一個現有配置選項
  - 測試步驟：修改配置內容並保存
  - 預期結果：配置選項成功更新，變更立即生效

- [ ] **TC-6.2.2.3** 刪除配置選項
  - 前置條件：選擇一個配置選項
  - 測試步驟：點擊刪除按鈕並確認
  - 預期結果：配置選項成功刪除，從列表中移除

- [ ] **TC-6.2.2.4** 配置選項排序
  - 前置條件：有多個配置選項
  - 測試步驟：拖拽調整選項順序
  - 預期結果：順序成功調整，在預覽中正確顯示

#### 2.1.3 即時預覽功能測試
**測試案例：**
- [ ] **TC-6.2.3.1** 配置變更即時預覽
  - 前置條件：在配置管理頁面
  - 測試步驟：修改配置選項
  - 預期結果：預覽區域即時更新，顯示變更效果

- [ ] **TC-6.2.3.2** 預覽區域響應式設計
  - 前置條件：在不同螢幕尺寸下測試
  - 測試步驟：調整瀏覽器視窗大小
  - 預期結果：預覽區域正確適應不同螢幕尺寸

### 2.2 配置表單組件測試

#### 2.2.1 GameConfigForm.tsx 測試
**測試案例：**
- [ ] **TC-6.2.4.1** 表單欄位驗證
  - 前置條件：開啟配置表單
  - 測試步驟：提交空表單或無效資料
  - 預期結果：顯示適當的錯誤訊息

- [ ] **TC-6.2.4.2** 欄位類型選擇
  - 前置條件：在配置表單中
  - 測試步驟：選擇不同的欄位類型
  - 預期結果：表單動態調整，顯示對應的配置選項

#### 2.2.2 TemplatePreview.tsx 測試
**測試案例：**
- [ ] **TC-6.2.5.1** 預覽組件正確渲染
  - 前置條件：配置管理頁面載入
  - 測試步驟：檢查預覽區域
  - 預期結果：預覽組件正確顯示模擬的表單

- [ ] **TC-6.2.5.2** 預覽互動功能
  - 前置條件：預覽區域顯示
  - 測試步驟：在預覽中點擊和輸入
  - 預期結果：預覽區域可正常互動，模擬真實使用體驗

---

## 3. 用戶體驗優化測試 (第三階段)

### 3.1 表單驗證測試

#### 3.1.1 智能表單驗證測試
**測試案例：**
- [ ] **TC-6.3.1.1** 必填欄位驗證
  - 前置條件：表單包含必填欄位
  - 測試步驟：提交空白的必填欄位
  - 預期結果：顯示必填欄位錯誤訊息

- [ ] **TC-6.3.1.2** 即時欄位驗證
  - 前置條件：在表單欄位中輸入
  - 測試步驟：輸入無效資料
  - 預期結果：即時顯示驗證錯誤訊息

- [ ] **TC-6.3.1.3** 自訂驗證規則
  - 前置條件：配置包含自訂驗證規則
  - 測試步驟：輸入不符合規則的資料
  - 預期結果：顯示自訂錯誤訊息

#### 3.1.2 表單驗證工具函式測試
**測試案例：**
- [ ] **TC-6.3.1.4** 同步驗證功能
  - 前置條件：使用同步驗證規則
  - 測試步驟：輸入資料並觸發驗證
  - 預期結果：立即返回驗證結果

- [ ] **TC-6.3.1.5** 非同步驗證功能
  - 前置條件：使用非同步驗證規則
  - 測試步驟：輸入資料並觸發驗證
  - 預期結果：顯示載入狀態，完成後返回結果

### 3.2 草稿儲存功能測試

#### 3.2.1 自動儲存測試
**測試案例：**
- [ ] **TC-6.3.2.1** 自動儲存觸發
  - 前置條件：在表單中輸入資料
  - 測試步驟：等待自動儲存延遲
  - 預期結果：資料自動儲存到 localStorage

- [ ] **TC-6.3.2.2** 草稿恢復功能
  - 前置條件：有已儲存的草稿
  - 測試步驟：重新載入頁面
  - 預期結果：顯示草稿恢復提示，可選擇恢復或清除

- [ ] **TC-6.3.2.3** 草稿過期處理
  - 前置條件：有過期的草稿資料
  - 測試步驟：重新載入頁面
  - 預期結果：過期草稿被自動清除

#### 3.2.2 手動儲存測試
**測試案例：**
- [ ] **TC-6.3.2.4** 手動儲存按鈕
  - 前置條件：在表單中輸入資料
  - 測試步驟：點擊手動儲存按鈕
  - 預期結果：立即儲存資料，顯示成功訊息

- [ ] **TC-6.3.2.5** 儲存狀態顯示
  - 前置條件：正在儲存或已儲存
  - 測試步驟：檢查儲存狀態指示器
  - 預期結果：正確顯示儲存狀態

### 3.3 無障礙支援測試

#### 3.3.1 ARIA 屬性測試
**測試案例：**
- [ ] **TC-6.3.3.1** 表單欄位 ARIA 標籤
  - 前置條件：使用螢幕閱讀器
  - 測試步驟：導航表單欄位
  - 預期結果：螢幕閱讀器正確讀取欄位標籤和描述

- [ ] **TC-6.3.3.2** 錯誤訊息 ARIA 關聯
  - 前置條件：表單有驗證錯誤
  - 測試步驟：使用螢幕閱讀器
  - 預期結果：錯誤訊息與對應欄位正確關聯

#### 3.3.2 鍵盤導航測試
**測試案例：**
- [ ] **TC-6.3.3.3** Tab 鍵導航
  - 前置條件：在表單頁面
  - 測試步驟：使用 Tab 鍵導航
  - 預期結果：焦點按邏輯順序移動

- [ ] **TC-6.3.3.4** 焦點陷阱
  - 前置條件：在模態對話框中
  - 測試步驟：使用 Tab 鍵導航
  - 預期結果：焦點不會離開對話框

### 3.4 高對比度模式測試

#### 3.4.1 視覺對比度測試
**測試案例：**
- [ ] **TC-6.3.4.1** 高對比度模式切換
  - 前置條件：啟用高對比度模式
  - 測試步驟：檢查頁面元素
  - 預期結果：所有元素使用高對比度顏色

- [ ] **TC-6.3.4.2** 文字可讀性
  - 前置條件：高對比度模式啟用
  - 測試步驟：檢查所有文字內容
  - 預期結果：文字清晰可讀，對比度符合 WCAG 標準

### 3.5 響應式設計測試

#### 3.5.1 多裝置適配測試
**測試案例：**
- [ ] **TC-6.3.5.1** 桌面版顯示
  - 前置條件：在桌面瀏覽器中
  - 測試步驟：檢查頁面佈局
  - 預期結果：佈局適合桌面螢幕，元素排列合理

- [ ] **TC-6.3.5.2** 平板版顯示
  - 前置條件：在平板裝置或模擬器中
  - 測試步驟：檢查頁面佈局
  - 預期結果：佈局適應平板螢幕，觸控友好

- [ ] **TC-6.3.5.3** 手機版顯示
  - 前置條件：在手機裝置或模擬器中
  - 測試步驟：檢查頁面佈局
  - 預期結果：佈局適合手機螢幕，單欄排列

#### 3.5.2 觸控優化測試
**測試案例：**
- [ ] **TC-6.3.5.4** 觸控目標大小
  - 前置條件：在觸控裝置上
  - 測試步驟：點擊按鈕和連結
  - 預期結果：觸控目標至少 44x44px，易於點擊

- [ ] **TC-6.3.5.5** 手勢支援
  - 前置條件：在觸控裝置上
  - 測試步驟：使用滑動手勢
  - 預期結果：支援適當的手勢操作

---

## 4. 整合測試

### 4.1 端到端流程測試

#### 4.1.1 完整訂單流程測試
**測試案例：**
- [ ] **TC-6.4.1.1** 管理員配置到用戶下單
  - 前置條件：管理員已配置遊戲選項
  - 測試步驟：
    1. 管理員配置遊戲選項
    2. 用戶訪問遊戲頁面
    3. 用戶填寫表單並提交訂單
  - 預期結果：整個流程順暢，資料正確傳遞

- [ ] **TC-6.4.1.2** 配置變更即時生效
  - 前置條件：用戶正在填寫表單
  - 測試步驟：管理員同時修改配置
  - 預期結果：用戶頁面顯示更新後的配置

### 4.2 效能測試

#### 4.2.1 載入效能測試
**測試案例：**
- [ ] **TC-6.4.2.1** 頁面載入時間
  - 前置條件：使用不同網路環境
  - 測試步驟：測量頁面載入時間
  - 預期結果：首屏載入時間 < 3秒

- [ ] **TC-6.4.2.2** 動態組件渲染效能
  - 前置條件：表單包含多個動態欄位
  - 測試步驟：測量表單渲染時間
  - 預期結果：表單渲染時間 < 1秒

### 4.3 錯誤處理測試

#### 4.3.1 異常情況處理
**測試案例：**
- [ ] **TC-6.4.3.1** 配置資料損壞
  - 前置條件：模擬配置資料損壞
  - 測試步驟：載入遊戲頁面
  - 預期結果：顯示適當的錯誤訊息，不影響其他功能

- [ ] **TC-6.4.3.2** 網路中斷處理
  - 前置條件：模擬網路中斷
  - 測試步驟：嘗試儲存配置或提交表單
  - 預期結果：顯示網路錯誤訊息，提供重試選項

---

## 5. 測試環境與工具

### 5.1 測試環境
- **瀏覽器：** Chrome, Firefox, Safari, Edge (最新版本)
- **裝置：** 桌面、平板、手機
- **網路：** 高速網路、慢速網路、離線模式

### 5.2 測試工具
- **自動化測試：** Playwright, Jest
- **效能測試：** Lighthouse, WebPageTest
- **無障礙測試：** axe-core, WAVE
- **手動測試：** 螢幕閱讀器 (NVDA, JAWS)

### 5.3 測試資料
- **測試遊戲：** 至少 3 個不同類型的遊戲
- **測試配置：** 涵蓋所有欄位類型的配置組合
- **測試用戶：** 管理員帳號、一般用戶帳號

---

## 6. 測試執行計劃

### 6.1 測試階段
1. **單元測試** - 測試個別組件功能
2. **整合測試** - 測試組件間互動
3. **系統測試** - 測試完整功能流程
4. **用戶驗收測試** - 模擬真實使用場景

### 6.2 測試優先級
- **P0 (高優先級)：** 核心功能、資料完整性、安全性
- **P1 (中優先級)：** 用戶體驗、效能、無障礙
- **P2 (低優先級)：** 邊緣情況、優化功能

### 6.3 測試報告
- 每日測試進度報告
- 缺陷追蹤和修復狀態
- 測試覆蓋率報告
- 效能基準測試結果

---

## 7. 驗收標準

### 7.1 功能驗收標準
- [ ] 所有測試案例通過率 ≥ 95%
- [ ] 無 P0 級別缺陷
- [ ] P1 級別缺陷 ≤ 3 個
- [ ] 核心功能 100% 可用

### 7.2 效能驗收標準
- [ ] 頁面載入時間 < 3秒
- [ ] 表單響應時間 < 500ms
- [ ] 無記憶體洩漏
- [ ] 支援 100+ 並發用戶

### 7.3 品質驗收標準
- [ ] 通過無障礙測試 (WCAG 2.1 AA)
- [ ] 跨瀏覽器相容性 100%
- [ ] 響應式設計完美適配
- [ ] 代碼覆蓋率 ≥ 80%

---

## 8. 風險評估

### 8.1 技術風險
- **複雜度風險：** 動態表單渲染可能影響效能
- **相容性風險：** 不同瀏覽器對新 CSS 特性的支援
- **整合風險：** 與現有系統的整合可能出現問題

### 8.2 緩解措施
- 實施效能監控和優化
- 建立瀏覽器相容性測試矩陣
- 制定詳細的整合測試計劃
- 建立回滾機制

---

## 9. 測試完成檢查清單

### 9.1 功能完整性檢查
- [ ] 所有三個階段的測試案例已完成
- [ ] 所有缺陷已修復並驗證
- [ ] 回歸測試通過
- [ ] 效能測試達標

### 9.2 文檔完整性檢查
- [ ] 測試報告已提交
- [ ] 缺陷報告已歸檔
- [ ] 測試案例已更新
- [ ] 用戶手冊已更新

### 9.3 部署準備檢查
- [ ] 生產環境測試通過
- [ ] 監控工具已配置
- [ ] 回滾計劃已準備
- [ ] 用戶培訓已完成

---

**測試計劃版本：** 1.0  
**最後更新：** 2024-07-20  
**負責人：** 開發團隊  
**審核人：** 專案經理 