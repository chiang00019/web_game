# 驗證功能建議

本文件概述了當前驗證系統的狀態，並為基於 Supabase 的 Serverless 架構提供了改進建議。

## 目前實作狀態

*   **註冊:** 使用者可以使用電子郵件、密碼和使用者名稱進行註冊。使用者名稱儲存在 `user_metadata` 中。
*   **登入:** 使用者可以使用電子郵件和密碼登入。
*   **客戶端 (Client-side):** `AuthForm.tsx` 組件處理登入和註冊表單，包含基本的驗證，例如檢查密碼是否相符。
*   **伺服器端 (Server-side):**
    *   已建立註冊 (`/api/auth/signup/route.ts`) 和登入 (`/api/auth/login/route.ts`) 的 API 路由。
    *   已正確設定用於伺ervidor端和客戶端的 Supabase 客戶端。
*   **中介軟體 (Middleware):** `middleware.ts` 已設定用於保護路由和管理會話 (Session)。

## 待改進及缺失功能

1.  **登出功能:** 目前缺少讓使用者登出的方法。
2.  **密碼重設:** 沒有提供讓使用者在忘記密碼時可以重設密碼的功能。Supabase 內建了此功能，但前端需要實作對應的流程，並建立一個獨立的忘記密碼頁面 (`/auth/forgot-password`)。
3.  **使用者資料管理:** 使用者註冊後無法查看或更新他們的個人資料（例如使用者名稱）。
4.  **電子郵件驗證流程:** 註冊過程會發送驗證郵件，但應用程式沒有處理使用者點擊驗證連結後的流程（例如，將使用者導向特定頁面並顯示成功訊息）。
5.  **第三方登入 (OAuth):** 未提供使用者透過 Google、GitHub 等第三方服務登入的選項。Supabase 支援多種 OAuth 提供商，可以輕易整合。
6.  **錯誤處理與使用者回饋:** 雖然有基本的錯誤處理，但可以做得更健全，並提供更清晰的使用者回饋。
7.  **會話管理 (Session Management):** 目前的會話管理功能很基本。可以考慮增加「記住我」或更細緻的會話控制功能。
8.  **基於角色的存取控制 (RBAC):** 對於管理員頁面，目前沒有機制檢查使用者是否具有「admin」角色。這對於保護後台至關重要，可以利用 Supabase 的 RLS (Row Level Security) 或自訂 Claims 來實現。
9.  **UI/UX 改善:**
    *   **字體顏色:** 當前部分頁面的字體顏色過淺，影響閱讀體驗，需要進行調整。
